<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Elasticsearch  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Elasticsearch  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">Elasticsearch Docs</a> (12% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Elasticsearch Reference</a>
        <img id="carat" src="img/carat.png" />
        Elasticsearch  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Client.html">Client</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ElasticsearchClient.html">ElasticsearchClient</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ElasticsearchIndex.html">ElasticsearchIndex</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ElasticsearchIndex.html#/s:13Elasticsearch0A5IndexC11DefaultTypeV">â€“ DefaultType</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ElasticsearchIndex.html#/s:13Elasticsearch0A5IndexC5AliasV">â€“ Alias</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ElasticsearchIndex/Settings.html">â€“ Settings</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ElasticsearchDatabase.html">ElasticsearchDatabase</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ElasticsearchProvider.html">ElasticsearchProvider</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ElasticsearchClientConfig.html">ElasticsearchClientConfig</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ElasticsearchBulk.html">ElasticsearchBulk</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Query Constructors.html">Query Constructors</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/SearchContainer.html">SearchContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BoolQuery.html">BoolQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CommonTerms.html">CommonTerms</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Exists.html">Exists</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Fuzzy.html">Fuzzy</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IDs.html">IDs</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Match.html">Match</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MatchAll.html">MatchAll</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MatchNone.html">MatchNone</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MatchPhrase.html">MatchPhrase</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MatchPhrasePrefix.html">MatchPhrasePrefix</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MultiMatch.html">MultiMatch</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MultiMatch/Kind.html">â€“ Kind</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Prefix.html">Prefix</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Query.html">Query</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Range.html">Range</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Range.html#/s:13Elasticsearch5RangeV0B4PairV">â€“ RangePair</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Regexp.html">Regexp</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ScriptQuery.html">ScriptQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Term.html">Term</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Terms.html">Terms</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Wildcard.html">Wildcard</a>
              </li>
              <li class="nav-group-task">
                <a href="Query Constructors.html#/s:13Elasticsearch9SpanQueryP">SpanQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpanTerm.html">SpanTerm</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpanFirst.html">SpanFirst</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpanNot.html">SpanNot</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpanOr.html">SpanOr</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpanNear.html">SpanNear</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpanContaining.html">SpanContaining</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SpanWithin.html">SpanWithin</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GeoPolygon.html">GeoPolygon</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Aggregation Constructors.html">Aggregation Constructors</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/MinAggregation.html">MinAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SumAggregation.html">SumAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StatsAggregation.html">StatsAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MaxAggregation.html">MaxAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AvgAggregation.html">AvgAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GeoCentroidAggregation.html">GeoCentroidAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GeoBoundsAggregation.html">GeoBoundsAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TopHitsAggregation.html">TopHitsAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CardinalityAggregation.html">CardinalityAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ValueCountAggregation.html">ValueCountAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ExtendedStatsAggregation.html">ExtendedStatsAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TermsAggregation.html">TermsAggregation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TermsAggregation/CollectMode.html">â€“ CollectMode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Response Structures.html">Response Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/AggregationExtendedStatsResponse.html">AggregationExtendedStatsResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationExtendedStatsResponse/StandardDeviationBounds.html">â€“ StandardDeviationBounds</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationGeoBoundsResponse.html">AggregationGeoBoundsResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationGeoBoundsResponse/BoundsContainer.html">â€“ BoundsContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationGeoBoundsResponse/BoundsPoint.html">â€“ BoundsPoint</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationGeoCentroidResponse.html">AggregationGeoCentroidResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationGeoCentroidResponse/BoundsPoint.html">â€“ BoundsPoint</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/AggregationResponse.html">AggregationResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationSingleValueResponse.html">AggregationSingleValueResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationStatsResponse.html">AggregationStatsResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationTermsResponse.html">AggregationTermsResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DocResponse.html">DocResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IndexResponse.html">IndexResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IndexResponse/Shards.html">â€“ Shards</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IndexResponse/ResultType.html">â€“ ResultType</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SearchResponse.html">SearchResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SearchResponse/Shards.html">â€“ Shards</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SearchResponse/HitsContainer.html">â€“ HitsContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BulkResponse.html">BulkResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BulkItemResponse.html">BulkItemResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BulkItemResponse/Shards.html">â€“ Shards</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BulkItemResponse/ResultType.html">â€“ ResultType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Index Mapping.html">Index Mapping</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/IndexSettings.html">IndexSettings</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IndexSettings.html#/s:13Elasticsearch13IndexSettingsV7VersionV">â€“ Version</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapBinary.html">MapBinary</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapBoolean.html">MapBoolean</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapByte.html">MapByte</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapCompletionSuggester.html">MapCompletionSuggester</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapDate.html">MapDate</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapDateRange.html">MapDateRange</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapDouble.html">MapDouble</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapDoubleRange.html">MapDoubleRange</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapFloat.html">MapFloat</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapFloatRange.html">MapFloatRange</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapGeoPoint.html">MapGeoPoint</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapGeoShape.html">MapGeoShape</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapGeoShape/GeoShapePrefixTree.html">â€“ GeoShapePrefixTree</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapGeoShape/GeoShapePrecision.html">â€“ GeoShapePrecision</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapGeoShape/GeoShapeStrategy.html">â€“ GeoShapeStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapGeoShape/GeoShapeOrientation.html">â€“ GeoShapeOrientation</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapHalfFloat.html">MapHalfFloat</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapIPAddress.html">MapIPAddress</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapInteger.html">MapInteger</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapIntegerRange.html">MapIntegerRange</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapJoin.html">MapJoin</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapKeyword.html">MapKeyword</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapLong.html">MapLong</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapLongRange.html">MapLongRange</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapNested.html">MapNested</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapObject.html">MapObject</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapPercolator.html">MapPercolator</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapScaledFloat.html">MapScaledFloat</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapShort.html">MapShort</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapText.html">MapText</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MapTokenCount.html">MapTokenCount</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Analyzers.html">Analyzers</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/StandardAnalyzer.html">StandardAnalyzer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/WhitespaceAnalyzer.html">WhitespaceAnalyzer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CustomAnalyzer.html">CustomAnalyzer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/KeywordAnalyzer.html">KeywordAnalyzer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/FingerprintAnalyzer.html">FingerprintAnalyzer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PatternAnalyzer.html">PatternAnalyzer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SimpleAnalyzer.html">SimpleAnalyzer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StopAnalyzer.html">StopAnalyzer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Tokenizers.html">Tokenizers</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/ClassicTokenizer.html">ClassicTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EdgeNGramTokenizer.html">EdgeNGramTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EdgeNGramTokenizer/CharacterClass.html">â€“ CharacterClass</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/KeywordTokenizer.html">KeywordTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LetterTokenizer.html">LetterTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LowercaseTokenizer.html">LowercaseTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/NGramTokenizer.html">NGramTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/NGramTokenizer/CharacterClass.html">â€“ CharacterClass</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PathHierarchyTokenizer.html">PathHierarchyTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PatternTokenizer.html">PatternTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SimplePatternSplitTokenizer.html">SimplePatternSplitTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SimplePatternTokenizer.html">SimplePatternTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StandardTokenizer.html">StandardTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ThaiTokenizer.html">ThaiTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/UAXURLEmailTokenizer.html">UAXURLEmailTokenizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/WhitespaceTokenizer.html">WhitespaceTokenizer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Character Filters.html">Character Filters</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/HTMLStripCharacterFilter.html">HTMLStripCharacterFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PatternReplaceCharacterFilter.html">PatternReplaceCharacterFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MappingCharacterFilter.html">MappingCharacterFilter</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Token Filters.html">Token Filters</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/ASCIIFoldingFilter.html">ASCIIFoldingFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ApostropheFilter.html">ApostropheFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ClassicFilter.html">ClassicFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DecimalDigitFilter.html">DecimalDigitFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EdgeNGramFilter.html">EdgeNGramFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/KStemFilter.html">KStemFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LengthFilter.html">LengthFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LowercaseFilter.html">LowercaseFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LowercaseFilter/Language.html">â€“ Language</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/NGramFilter.html">NGramFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PorterStemFilter.html">PorterStemFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ReverseFilter.html">ReverseFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StandardFilter.html">StandardFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SynonymFilter.html">SynonymFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/SynonymFilter/Format.html">â€“ Format</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TrimFilter.html">TrimFilter</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/UppercaseFilter.html">UppercaseFilter</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Supporting Structures.html">Supporting Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/Operator.html">Operator</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/OrderDirection.html">OrderDirection</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TextField.html">TextField</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TextFieldType.html">TextFieldType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TermVector.html">TermVector</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SimilarityType.html">SimilarityType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TextIndexOptions.html">TextIndexOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/GeoValidationMethod.html">GeoValidationMethod</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GeoPoint.html">GeoPoint</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Script.html">Script</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/AggregationBucket.html">AggregationBucket</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BulkHeader.html">BulkHeader</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/OperationType.html">OperationType</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Analysis.html">Analysis</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/DefinesAnalyzers.html">DefinesAnalyzers</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DefinesCharacterFilters.html">DefinesCharacterFilters</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DefinesNormalizers.html">DefinesNormalizers</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DefinesTokenFilters.html">DefinesTokenFilters</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/DefinesTokenizers.html">DefinesTokenizers</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Mappable.html">Mappable</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SettableID.html">SettableID</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/CustomNormalizer.html">CustomNormalizer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ElasticsearchError.html">ElasticsearchError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Typealiases.html">Other Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:13Elasticsearch12Aggregationsa">Aggregations</a>
              </li>
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:13Elasticsearch16SpanQueryElementa">SpanQueryElement</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='a-vapor-swift-elasticsearch-client' class='heading'>A Vapor/Swift Elasticsearch Client ðŸ”Ž</h1>

<p>The goal of this project is to provide a comprehensive yet easy to use
Elasticsearch client for Swift. The Vapor server side framework has a large
community around it so integrating with Vapor was a logical first step.  That
said, this library should be very easy to port to another framework (Perfect,
Kitura) or even use by itself for command line utilities and other such
purposes.</p>

<p>Main priorities are to provide index management (field mapping, settings,
tokenizers and analyzers), CRUD support and search results with support for
aggregations. Currently these goals are all being met on some level.</p>
<h3 id='warning' class='heading'>Warning</h3>

<p>This project is under heavy development and the public API has been changing
(with no backward compatability) every week. That said, the changes tend to be
fairly minor as long as you&rsquo;re diligent with pulling the latest code every week.</p>
<h2 id='high-level-features' class='heading'>High Level Features</h2>

<ul>
<li>Support for creating, updating, requesting and deletion of documents</li>
<li>High level construction of the Elasticsearch Query DSL</li>
<li>Execution of constructed search queries</li>
<li>Execution of many types of aggregations (more are implemented regurally)</li>
<li>Population of object models when fetching a document and search results (via Swift Codable support)</li>
<li>Automatic seralization of object models to Elasticsearch (via Swift Codable support)</li>
<li>Ability to specify the mapping for index creation</li>
<li>Support for bulk operations</li>
</ul>
<h2 id='elasticsearch-version' class='heading'>Elasticsearch Version</h2>

<p>All development and testing is being done using the Elasticsearch 6.x series.
This has implications around document types as they have been depricated in
Elasticsearch 6.0 and will be removed in 7.0. Given that multiple types per
index is a thing of the past and this client is a thing of the future, supporting
multiple types per index didn&rsquo;t seem like a good fit. If using an older version
of Elasticsearch, keep this limitation in mind.</p>
<h2 id='installation' class='heading'>ðŸ“¦ Installation</h2>
<h3 id='package-swift' class='heading'>Package.swift</h3>

<p>Add <code>Elasticsearch</code> to the Package dependencies:</p>
<pre class="highlight swift"><code><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/ryangrimm/VaporElasticsearch"</span><span class="p">,</span> <span class="o">.</span><span class="nf">branch</span><span class="p">(</span><span class="s">"master"</span><span class="p">))</span>
<span class="p">]</span>
</code></pre>

<p>as well as to your target (e.g. <q>App</q>):</p>
<pre class="highlight swift"><code><span class="nv">targets</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="o">.</span><span class="nf">target</span><span class="p">(</span>
        <span class="nv">name</span><span class="p">:</span> <span class="s">"App"</span><span class="p">,</span>
        <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span> <span class="s">"Elasticsearch"</span> <span class="o">...</span><span class="p">]</span>
    <span class="p">),</span>
    <span class="o">...</span>
<span class="p">]</span>
</code></pre>
<h2 id='getting-started' class='heading'>Getting started ðŸš€</h2>

<p>Make sure that you&rsquo;ve imported <code>Elasticsearch</code> everywhere needed:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">Elasticsearch</span>
</code></pre>
<h3 id='adding-the-service' class='heading'>Adding the Service</h3>

<p>Add the <code><a href="Classes/ElasticsearchDatabase.html">ElasticsearchDatabase</a></code> in your <code>configure.swift</code> file:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">esConfig</span> <span class="o">=</span> <span class="kt">ElasticsearchClientConfig</span><span class="p">(</span><span class="nv">hostname</span><span class="p">:</span> <span class="s">"localhost"</span><span class="p">,</span> <span class="nv">port</span><span class="p">:</span> <span class="mi">9200</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">es</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">ElasticsearchDatabase</span><span class="p">(</span><span class="nv">config</span><span class="p">:</span> <span class="n">esConfig</span><span class="p">)</span>
<span class="k">var</span> <span class="nv">databases</span> <span class="o">=</span> <span class="kt">DatabasesConfig</span><span class="p">()</span>
<span class="n">databases</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">database</span><span class="p">:</span> <span class="n">es</span><span class="p">,</span> <span class="nv">as</span><span class="p">:</span> <span class="o">.</span><span class="n">elasticsearch</span><span class="p">)</span>
<span class="n">services</span><span class="o">.</span><span class="nf">register</span><span class="p">(</span><span class="n">databases</span><span class="p">)</span>
</code></pre>
<h4 id='enable-logging' class='heading'>Enable Logging</h4>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">databases</span> <span class="o">=</span> <span class="kt">DatabasesConfig</span><span class="p">()</span>
<span class="n">databases</span><span class="o">.</span><span class="nf">enableLogging</span><span class="p">(</span><span class="nv">on</span><span class="p">:</span> <span class="o">.</span><span class="n">elasticsearch</span><span class="p">)</span>
<span class="n">services</span><span class="o">.</span><span class="nf">register</span><span class="p">(</span><span class="n">databases</span><span class="p">)</span>
</code></pre>
<h3 id='simple-search-example' class='heading'>Simple search example</h3>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Document</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">var</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">list</span><span class="p">(</span><span class="n">_</span> <span class="nv">req</span><span class="p">:</span> <span class="kt">Request</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">Future</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">Document</span><span class="p">]</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">Query</span><span class="p">(</span>
        <span class="kt">Match</span><span class="p">(</span><span class="nv">field</span><span class="p">:</span> <span class="s">"id"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"42"</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">req</span><span class="o">.</span><span class="nf">withNewConnection</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="o">.</span><span class="n">elasticsearch</span><span class="p">)</span> <span class="p">{</span> <span class="n">conn</span> <span class="k">in</span>

        <span class="k">return</span> <span class="k">try</span> <span class="n">conn</span><span class="o">.</span><span class="nf">search</span><span class="p">(</span>
        <span class="nv">decodeTo</span><span class="p">:</span> <span class="kt">Document</span><span class="o">.</span><span class="k">self</span><span class="p">,</span>
        <span class="nv">index</span><span class="p">:</span> <span class="s">"documents"</span><span class="p">,</span>
        <span class="nv">query</span><span class="p">:</span> <span class="kt">SearchContainer</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="p">}</span><span class="o">.</span><span class="nf">map</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="p">[</span><span class="kt">Document</span><span class="p">]</span><span class="o">.</span><span class="k">self</span> <span class="p">)</span> <span class="p">{</span> <span class="n">searchResponse</span> <span class="k">in</span>

        <span class="k">guard</span> <span class="k">let</span> <span class="nv">hits</span> <span class="o">=</span> <span class="n">searchResponse</span><span class="o">.</span><span class="n">hits</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">[</span><span class="kt">Document</span><span class="p">]()</span> <span class="p">}</span>
        <span class="k">let</span> <span class="nv">results</span> <span class="o">=</span> <span class="n">hits</span><span class="o">.</span><span class="n">hits</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="n">source</span> <span class="p">}</span>
        <span class="k">return</span> <span class="n">results</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='creating-an-index-with-filter' class='heading'>Creating an index (with filter)</h3>
<pre class="highlight swift"><code>
<span class="c1">//let client: ElasticsearchClient = ...</span>

<span class="k">let</span> <span class="nv">synonymFilter</span> <span class="o">=</span> <span class="kt">SynonymFilter</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"synonym_filter"</span><span class="p">,</span>
    <span class="nv">synonyms</span><span class="p">:</span> <span class="p">[</span><span class="s">"file, document"</span><span class="p">,</span> <span class="s">"nice, awesome, great"</span><span class="p">])</span>

<span class="k">let</span> <span class="nv">synonymAnalyzer</span> <span class="o">=</span> <span class="kt">CustomAnalyzer</span><span class="p">(</span>
    <span class="nv">name</span><span class="p">:</span> <span class="s">"synonym_analyzer"</span><span class="p">,</span>
    <span class="nv">tokenizer</span><span class="p">:</span> <span class="kt">StandardTokenizer</span><span class="p">(),</span>
    <span class="nv">filter</span><span class="p">:</span> <span class="p">[</span><span class="n">synonymFilter</span><span class="p">]))</span>

<span class="k">let</span> <span class="nv">index</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="nf">configureIndex</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"documents"</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">indexSettings</span><span class="p">(</span><span class="nv">index</span><span class="p">:</span> <span class="kt">IndexSettings</span><span class="p">(</span><span class="nv">shards</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="nv">replicas</span><span class="p">:</span> <span class="mi">1</span><span class="p">))</span>
    <span class="o">.</span><span class="nf">property</span><span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"id"</span><span class="p">,</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">MapKeyword</span><span class="p">())</span>
    <span class="o">.</span><span class="nf">property</span><span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"title"</span><span class="p">,</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">MapText</span><span class="p">(</span><span class="nv">analyzer</span><span class="p">:</span> <span class="n">synonymAnalyzer</span><span class="p">))</span>

<span class="k">try</span> <span class="n">index</span><span class="o">.</span><span class="nf">create</span><span class="p">()</span>
</code></pre>
<h3 id='deleting-an-index' class='heading'>Deleting an index</h3>
<pre class="highlight swift"><code>
<span class="c1">//let client: ElasticsearchClient = ...</span>
<span class="k">try</span> <span class="n">client</span><span class="o">.</span><span class="nf">deleteIndex</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"documents"</span><span class="p">)</span>
</code></pre>
<h3 id='use-code-bulk-code-to-insert-documents' class='heading'>Use <code>bulk</code>to insert documents</h3>
<pre class="highlight swift"><code><span class="c1">//let client: ElasticsearchClient = ...</span>

<span class="k">let</span> <span class="nv">doc1</span> <span class="o">=</span> <span class="kt">Document</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="s">"hello world"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">doc2</span> <span class="o">=</span> <span class="kt">Document</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="nv">title</span><span class="p">:</span> <span class="s">"awesome place"</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">bulk</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="nf">bulkOperation</span><span class="p">()</span>
<span class="n">bulk</span><span class="o">.</span><span class="n">defaultHeader</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="s">"documents"</span>

<span class="k">try</span> <span class="n">bulk</span><span class="o">.</span><span class="nf">create</span><span class="p">(</span><span class="nv">doc</span><span class="p">:</span> <span class="n">doc1</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">String</span><span class="p">(</span><span class="n">doc1</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
<span class="k">try</span> <span class="n">bulk</span><span class="o">.</span><span class="nf">create</span><span class="p">(</span><span class="nv">doc</span><span class="p">:</span> <span class="n">doc2</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">String</span><span class="p">(</span><span class="n">doc2</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
<span class="c1">// if you want to overwrite documents, use `bulk.index` instead</span>

<span class="k">try</span> <span class="n">bulk</span><span class="o">.</span><span class="nf">send</span><span class="p">()</span>
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="" target="_blank" rel="external">Ryan Grimm</a>. All rights reserved. (Last updated: 2018-07-25)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy â™ªâ™« v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
